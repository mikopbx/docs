# Синхронизация с LDAP/AD

Этот модуль предназначен для двусторонней синхронизации учетных данных сотрудников с MikoPBX. Источником данных служит сервер Active Directory или LDAP.

<figure><img src="../../.gitbook/assets/ModuleLdapSync - indexRU.png" alt=""><figcaption><p>Настройка серверов Active Directory для синхронизации пользователей с MikoPBX</p></figcaption></figure>

## Параметры синхронизации

Для каждого сервера AD/LDAP, вы можете указать настройки синхронизации, фильтры по отделам или создать произвольный фильтр для сложной логики фильтрации.

<figure><img src="../../.gitbook/assets/ModuleLdapSync - modify ru1.png" alt=""><figcaption><p>Настройка учетных данных контроллера домена</p></figcaption></figure>

## Атрибуты учетных записей

Далее необходимо корректно настроить атрибуты для синхронизации учетных записей.

<figure><img src="../../.gitbook/assets/ModuleLdapSync - modify ru2.png" alt=""><figcaption><p>Настройка атрибутов синхронизации между MikoPBX и доменом</p></figcaption></figure>

## Первичная синхронизация

Во время первой синхронизации, система сопоставит уже существующие в MikoPBX учетные записи с полученными из домена данными. Для поиска соответствий используются следующие поля:

* Адрес электронной почты
* Имя сотрудника
* Мобильный телефон
* Внутренний телефон

## Тестирование и запуск

Перед включением автоматической синхронизации рекомендуется проверить правильность указанных атрибутов, нажав на кнопку **Выполнить запрос**.

Если все параметры указаны верно, вы увидите список сотрудников с атрибутами из домена. Это безопасный запрос и не приведет к изменениям в системе.

<figure><img src="../../.gitbook/assets/ModuleLdapSync - modify 4 ru.png" alt=""><figcaption><p>Тестирование синхронизации данных с AD/LDAP</p></figcaption></figure>

## Последующие шаги

После тестирования можно запустить ручную или автоматическую синхронизацию данных.

<figure><img src="../../.gitbook/assets/ModuleLdapSync - modify 5ru.png" alt=""><figcaption><p>Статус синхронизации сотрудников между доменом и MikoPBX</p></figcaption></figure>

В колонках "_статус_" и "_обновлен_" можно отследить текущий процесс синхронизации.

{% hint style="info" %}
На текущий момент удаление сотрудника из домена не приведет к его автоматическому удалению из MikoPBX. Учетная запись будет сохранена до момента ручного удаления администратором MikoPBX. \
Это связано с тем, что возможны различные сложные сценарии маршрутизации вызовов, при которых невозможно просто удалить сотрудника из маршрута, не заменив его другим.
{% endhint %}
