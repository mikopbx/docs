---
description: Новое в релизе
---

# MikoPBX 2024.1

### Обновление системных пакетов и библиотек

Ядро Linux и системные библиотеки обновлены до последних доступных версий. В частности ядро Linux обновлено до версии 6.6.1, Asterisk обновлен до версии  20.7.0\


### Визуализация ошибок в модулях

В предыдущем релизе был добавлен механизм, который автоматически отключает модули, внутри которых возникают серъезные ошибки. Некоторые пользователи столкнулись с проблемой определения причины отключения того или иного модуля. Теперь причина отображается рядом с переключателем, а при клике на иконку можно получить и текст самой ошибки.

### Рефакторинг магазина приложений

Все операции по установке и обновлению модулей перенесены на BackEnd, добавили детальную карточку для каждого модуля с возможностью выбрать версию для установки, посмотреть историю версий и описание изменений. Повяилась возможность не только обновлять модуль, но и выполнять откат к предыдущей версии. \
Оптимизировано отображение ошибок при установке, обновлении, включении и выключении модулей. \
Исправлена ошибка отображения системных сообщений на английском языке вместо выбранного пользователем.

Добавили возможность обновлять все модули одной кнопкой.



### Работа лицензируемых модулей при проблемах со связью

Некоторые платные модули требовали гарантированной связи с сервером лицензий для работы. В текущем релизе реализован режим работы оффлан, когда система запоминает последнее состояние лицензии и при отсутвии связи с сервером лицензирования использует закешированное состояние. В итоге сбоев в работе с лицензируемыми модулями будет меньше.



### Установка MikoPBX в облака

Унифицирован механиз автоматической настройки MikoPBX при установке в облаках, обновлениы инструкции для следующих окружений.

* Яндекс облако
* Microsoft Azure
* VK облако
* Google Cloud Platform

Добавлен механизм автоматического определения MTU при работе в облаках.

В серийную консоль после загрузки выводятся параметры для авторизации.

### Оптимизация системы для работы с большим количеством номеров

Добавили сохранение состояния, сортировки и текущей страницы в списке сотрудников. Оптимизированы механизмы работы проверки SIP паролей на безопасность для сокращения нагрузки на систему.



### Новый интерфейс для настройки Asterisk Manager Interface (AMI)

Опитимизирована форма настройки, добавили возможность разрешать действие **command** для учетной записи менеджера.

### Обновлен модуль мониторинга Zabbix

Теперь все необходимые настройки системы, фаервола и запуск агента выполняются автоматически вместе со стартом модуля. На форму модуля вынесен код конфигурационного файла для его удобного редактирования.

Из основной поставки исключен zabbix\_agent, теперь он поставляется в составе отдельного модуля.



### Обновлен модуль управления доступом

В MikoPBX исправлена ошибка, при которой иногда после авторизации не просиходил автоматический редирект на выбранную в модуле страницу.

В модуле описаны и сгруппированы права для всех доступных на сегодняшний день модулей расширений, для удобного администрирования.

Добавлен механиз разделения списка пользователей на страницы, чтобы было удобно администрировать фильтры записей разговоров и права доступа сотрудников. Добавлена сортировка по выбранным учетным записям в фильтре.





### Оптимизация активной защиты Fail2Ban

В форме настройки, добавили вкладки, в таблице заблокированных адресов появилась возможность сквозного поиска.&#x20;

Заблокированные адреса и причины блокировки сгруппированы по IP адресу в одну строку.

Сообщения модуля теперь записываются в собственные файлы логов.

### Копирование провайдеров и маршрутов

Добавили возможность создавать копию провайдера и настроек маршрутизации одним кликом.

### Поддержка CalDav в настройке нерабочего времени

Это новая фишка, можно добавить ссылку на календарь и использовать его в качестве источника для нерабочего времени. Тут нужны подробности :)

### Новые языки интерфейса: Тайский

Постепенно расширяем количество доступных языков в интерфейсе, в этом релизе добавили тайский. Большое спасибо нашим переводчикам.\
Если хотите помочь с переводом интерфейса MikoPBX и модулей, переходите [по ссылке](https://weblate.mikopbx.com/projects/mikopbx/admin-web-interface/).

### Прочие улучшения

В журнале звонков добавлен механиз автоматической подстройки размера списка под размеры экрана, тоже самое сделано в списке сотрудников.

Реализована автоматическая очистка записей в журнале истории вызовов, согласно настройке удаления старых записей. Ранее удалялись только звуковые файлы.

В карточке провайдра добавлено поле для хранения важной инфрмации, например номер аккаунта, адрес личногок кабинета, номер догвора провайдра, список используемых номеров телефонов и т.д.

В правилах входящей маршрутизации добавили возможность перевода вызова на воспроизведение звукового файла.

Для докера убрали ограничение на версию ядра 5.

Реализовали возможность автоподъема при originate для софтфонов MicroSIP и Telephone софтфонов.

В расширенных настройках провайдера теперь можно указывать параметры **DIAL\_COMMAND**

Добавлен лог cli комманд Asterisk в файл на диске для хранения.

Для авторизации SSH сессии по ключу реализована поддержка подписи по стандарту ed25519



### Исправлено множество  ошибок

В предыдущей версии некоторые клиенты сталкивались с проблемой зависающих каналов, в следствие чего без перезагрузки Asterisk было невозможно дозвониться до некоторых сотрудников. Теперь канал будет сбрасываться если в течение 30 секунд не поступает никаких RTP пакетов.

В предыдущей версии не корректно работала переадресация на сервисные номера, такие как голосовая почта, сигнал занято, переадресация на сотрудника по DID, завершить вызов.

В некоторых случаях при авторизации появлялась ошибка Crypt() алгоритма, при использовании простых паролей.

По умолчанию для очереди вызово было установлено ограничение ожидания 300 секунд, без отображения этого параметра в интерфейсе.

Иногда запись разговора не продолжалась после нуспешной переадресации.

Оптимизирован механиз удаления временных файлов, иногла это приводило к зависанию системы при загрузке.

Исправлена ошибка выбора транспорта для PJSIP протокола, которая приводила к неработоспособности канала.





```bash
// Some code
```



###
